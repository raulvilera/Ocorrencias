<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 - Cadastro de Ocorrências</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #001f3f;
        }

        .login-form {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 350px;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #001f3f;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .login-btn {
            width: 100%;
            padding: 10px;
            background-color: #001f3f;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .login-btn:hover {
            background-color: #003366;
        }

        .app-container {
            display: none;
            flex-direction: column;
            min-height: 100vh;
        }

        .header {
            background-color: #001f3f;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logout-btn {
            background: none;
            border: 1px solid white;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .content {
            flex: 1;
            padding: 20px;
        }

        /* Estilos específicos para a interface de gestão */
        .gestao-container {
            display: none;
        }

        .form-title {
            background-color: #001f3f;
            color: white;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .gestao-form {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
            gap: 15px;
        }

        .form-field {
            flex: 1;
            min-width: 200px;
        }

        .form-field label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-field input, .form-field select, .form-field textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-field textarea {
            min-height: 100px;
            resize: vertical;
        }

        .submit-btn {
            background-color: #001f3f;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        .success-message {
            background-color: #001f3f;
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            margin-top: 20px;
            display: none;
        }

        /* Estilos específicos para a interface do professor */
        .professor-container {
            display: none;
        }

        .occurrence-form {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .form-section h3 {
            margin-bottom: 15px;
            color: #001f3f;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checkbox-item input {
            margin-right: 5px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <h2>2025 - Cadastro de Ocorrências</h2>
            <div class="form-group">
                <label for="email">E-mail:</label>
                <input type="email" id="email" placeholder="Digite seu e-mail">
            </div>
            <div class="form-group">
                <label for="password">Senha:</label>
                <input type="password" id="password" placeholder="Digite sua senha">
            </div>
            <button class="login-btn" onclick="login()">Entrar</button>
        </div>
    </div>

    <!-- Container principal da aplicação -->
    <div class="app-container" id="appContainer">
        <div class="header">
            <h1>2025 - Cadastro de Ocorrências</h1>
            <div class="user-info">
                <span id="userName">Usuário</span>
                <button class="logout-btn" onclick="logout()">Sair</button>
            </div>
        </div>

        <!-- Interface de Gestão -->
        <div class="content gestao-container" id="gestaoContainer">
            <div class="form-title">
                CADASTRO DE OCORRÊNCIAS - GESTÃO
            </div>
            <div class="gestao-form">
                <div class="form-row">
                    <div class="form-field">
                        <label for="aluno">ALUNO:</label>
                        <input type="text" id="aluno">
                    </div>
                    <div class="form-field">
                        <label for="serie">SÉRIE/TURMA:</label>
                        <input type="text" id="serie">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="professor">PROFESSOR:</label>
                        <input type="text" id="professor">
                    </div>
                    <div class="form-field">
                        <label for="ra">RA:</label>
                        <input type="text" id="ra">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="disciplina">DISCIPLINA:</label>
                        <input type="text" id="disciplina">
                    </div>
                    <div class="form-field">
                        <label for="classificacao">CLASSIFICAÇÃO:</label>
                        <select id="classificacao" onchange="toggleSuspensionField()">
                            <option value="">Selecione</option>
                            <option value="OCORRÊNCIA">OCORRÊNCIA</option>
                            <option value="SUSPENSÃO">SUSPENSÃO</option>
                        </select>
                    </div>
                </div>
                <div class="form-row" id="suspensionField" style="display: none;">
                    <div class="form-field">
                        <label for="dataRetorno">DATA DE RETORNO:</label>
                        <input type="date" id="dataRetorno">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="descricao">DESCRIÇÃO:</label>
                        <textarea id="descricao"></textarea>
                    </div>
                </div>
                <button class="submit-btn" onclick="cadastrarOcorrencia()">Cadastrar Ocorrência</button>
                
                <div class="success-message" id="successMessage">
                    OCORRÊNCIA REGISTRADA COM SUCESSO
                </div>
            </div>
        </div>

        <!-- Interface do Professor -->
        <div class="content professor-container" id="professorContainer">
            <div class="form-title">
                REGISTRO DE OCORRÊNCIAS - PROFESSOR
            </div>
            <div class="occurrence-form">
                <div class="form-section">
                    <h3>1. IDENTIFICAÇÃO DA OCORRÊNCIA</h3>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="professorNome">NOME DO PROFESSOR:</label>
                            <input type="text" id="professorNome">
                        </div>
                        <div class="form-field">
                            <label for="professorTurma">TURMA:</label>
                            <input type="text" id="professorTurma">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="alunoOcorrencia">ALUNO ENVOLVIDO:</label>
                            <input type="text" id="alunoOcorrencia">
                        </div>
                        <div class="form-field">
                            <label for="dataOcorrencia">DATA DA OCORRÊNCIA:</label>
                            <input type="date" id="dataOcorrencia">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>2. TIPO DE IRREGULARIDADE</h3>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade1" name="irregularidades" value="Indisciplina">
                            <label for="irregularidade1">Indisciplina</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade2" name="irregularidades" value="Uso de celular">
                            <label for="irregularidade2">Uso de celular</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade3" name="irregularidades" value="Conversa paralela">
                            <label for="irregularidade3">Conversa paralela</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade4" name="irregularidades" value="Agressão verbal">
                            <label for="irregularidade4">Agressão verbal</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade5" name="irregularidades" value="Agressão física">
                            <label for="irregularidade5">Agressão física</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade6" name="irregularidades" value="Danos ao patrimônio">
                            <label for="irregularidade6">Danos ao patrimônio</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="irregularidade7" name="irregularidades" value="Outros">
                            <label for="irregularidade7">Outros</label>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>3. DESCRIÇÃO DA OCORRÊNCIA</h3>
                    <div class="form-row">
                        <div class="form-field">
                            <textarea id="descricaoOcorrencia" placeholder="Descreva detalhadamente a ocorrência..."></textarea>
                        </div>
                    </div>
                </div>

                <button class="submit-btn" onclick="registrarOcorrenciaProfessor()">Registrar Ocorrência</button>
                
                <div class="success-message" id="professorSuccessMessage">
                    OCORRÊNCIA REGISTRADA COM SUCESSO
                </div>
            </div>
        </div>
    </div>

    <script>
        // URLs do Google Apps Script Web App
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw6xFAlVRi_LukTR2P5iC-1OAe20pSWAykJOvuQjoUKhoE9BDDI37bt6MDdZRqyLAAr/exec';

        // Função de login
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Verificação simples de e-mail e senha (em produção, isso deve ser feito no backend)
            if (email === 'gestao@escola.com' && password === 'gestao123') {
                showGestaoInterface(email);
            } else if (email === 'professor@escola.com' && password === 'prof123') {
                showProfessorInterface(email);
            } else {
                alert('E-mail ou senha incorretos. Tente novamente.');
            }
        }

        // Função para mostrar interface de gestão
        function showGestaoInterface(email) {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'flex';
            document.getElementById('gestaoContainer').style.display = 'block';
            document.getElementById('professorContainer').style.display = 'none';
            document.getElementById('userName').textContent = email;
        }

        // Função para mostrar interface do professor
        function showProfessorInterface(email) {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('appContainer').style.display = 'flex';
            document.getElementById('gestaoContainer').style.display = 'none';
            document.getElementById('professorContainer').style.display = 'block';
            document.getElementById('userName').textContent = email;
        }

        // Função de logout
        function logout() {
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        }

        // Alternar visibilidade do campo de data de retorno para suspensões
        function toggleSuspensionField() {
            const classificacao = document.getElementById('classificacao').value;
            const suspensionField = document.getElementById('suspensionField');
            
            if (classificacao === 'SUSPENSÃO') {
                suspensionField.style.display = 'flex';
            } else {
                suspensionField.style.display = 'none';
            }
        }

        // Cadastrar ocorrência (Gestão)
        function cadastrarOcorrencia() {
            const aluno = document.getElementById('aluno').value;
            const serie = document.getElementById('serie').value;
            const professor = document.getElementById('professor').value;
            const ra = document.getElementById('ra').value;
            const disciplina = document.getElementById('disciplina').value;
            const classificacao = document.getElementById('classificacao').value;
            const dataRetorno = document.getElementById('dataRetorno').value;
            const descricao = document.getElementById('descricao').value;
            
            // Validação básica
            if (!aluno || !serie || !professor || !disciplina || !classificacao || !descricao) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            if (classificacao === 'SUSPENSÃO' && !dataRetorno) {
                alert('Para suspensão, é necessário informar a data de retorno.');
                return;
            }
            
            // Simulação de envio para o Google Apps Script
            console.log('Dados da ocorrência (Gestão):', {
                aluno, serie, professor, ra, disciplina, 
                classificacao, dataRetorno, descricao
            });
            
            // Aqui você faria a chamada para o Google Apps Script
            // fetch(SCRIPT_URL, { ... })
            
            // Mostrar mensagem de sucesso
            document.getElementById('successMessage').style.display = 'block';
            
            // Limpar formulário após 2 segundos
            setTimeout(() => {
                document.getElementById('successMessage').style.display = 'none';
                document.getElementById('aluno').value = '';
                document.getElementById('serie').value = '';
                document.getElementById('professor').value = '';
                document.getElementById('ra').value = '';
                document.getElementById('disciplina').value = '';
                document.getElementById('classificacao').value = '';
                document.getElementById('dataRetorno').value = '';
                document.getElementById('descricao').value = '';
                document.getElementById('suspensionField').style.display = 'none';
            }, 2000);
        }

        // Registrar ocorrência (Professor)
        function registrarOcorrenciaProfessor() {
            const professor = document.getElementById('professorNome').value;
            const turma = document.getElementById('professorTurma').value;
            const aluno = document.getElementById('alunoOcorrencia').value;
            const dataOcorrencia = document.getElementById('dataOcorrencia').value;
            
            // Obter irregularidades selecionadas
            const irregularidades = [];
            document.querySelectorAll('input[name="irregularidades"]:checked').forEach(input => {
                irregularidades.push(input.value);
            });
            
            const descricao = document.getElementById('descricaoOcorrencia').value;
            
            // Validação básica
            if (!professor || !turma || !aluno || !dataOcorrencia || irregularidades.length === 0 || !descricao) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            // Simulação de envio para o Google Apps Script
            console.log('Dados da ocorrência (Professor):', {
                professor, turma, aluno, dataOcorrencia, irregularidades, descricao
            });
            
            // Aqui você faria a chamada para o Google Apps Script
            // fetch(SCRIPT_URL, { ... })
            
            // Mostrar mensagem de sucesso
            document.getElementById('professorSuccessMessage').style.display = 'block';
            
            // Limpar formulário após 2 segundos
            setTimeout(() => {
                document.getElementById('professorSuccessMessage').style.display = 'none';
                document.getElementById('professorNome').value = '';
                document.getElementById('professorTurma').value = '';
                document.getElementById('alunoOcorrencia').value = '';
                document.getElementById('dataOcorrencia').value = '';
                document.querySelectorAll('input[name="irregularidades"]:checked').forEach(input => {
                    input.checked = false;
                });
                document.getElementById('descricaoOcorrencia').value = '';
            }, 2000);
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Definir data atual como padrão para o campo de data da ocorrência (professor)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dataOcorrencia').value = today;
        });
    </script>
</body>
</html>
